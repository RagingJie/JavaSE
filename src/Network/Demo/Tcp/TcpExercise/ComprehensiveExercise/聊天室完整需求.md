## 项目名称

​	利用TCP协议，做一个带有登录，注册的无界面，控制版的多人聊天室。

## 使用到的知识点

​	循环，判断，集合，IO，多线程，网络编程等

## 准备工作

在当前模块下新建txt文件，文件中保存正确的用户名和密码

文件内容如下：

```java
//左边是用户名
//右边是密码
zhangsan=123
lisi=1234
wangwu=12345
```

## 需求描述

① 客户端启动之后，需要连接服务端，并出现以下提示： 

```java
服务器已经连接成功
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
```

②选择登录之后，出现以下提示： 

```java
服务器已经连接成功
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
1
请输入用户名
```

③需要输入用户名和密码，输入完毕，没有按回车时，效果如下：

```java
服务器已经连接成功
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
1
请输入用户名
zhangsan
请输入密码
123
```

④按下回车，提交给服务器验证

服务器会结合txt文件中的用户名和密码进行判断

根据不同情况，服务器回写三种判断提示：

```java
服务器回写第一种提示：登录成功
服务器回写第二种提示：密码有误  
服务器回写第三种提示：用户名不存在
```

⑤客户端接收服务端回写的数据，根据三种情况进行不同的处理方案

   登录成功的情况， 可以开始聊天，出现以下提示：

```java
服务器已经连接成功
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
1
请输入用户名
zhangsan
请输入密码
123
1
登录成功，开始聊天
请输入您要说的话
```

密码错误的情况，需要重新输入，出现以下提示：

```java
服务器已经连接成功
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
1
请输入用户名
zhangsan
请输入密码
aaa
密码输入错误
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
```

用户名不存在的情况，需要重新输入，出现以下提示：

```java
服务器已经连接成功
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
1
请输入用户名
zhaoliu
请输入密码
123456
用户名不存在
==============欢迎来到黑马聊天室================
1登录
2注册
请输入您的选择：
```

⑥如果成功登录，就可以开始聊天，此时的聊天是群聊，一个人发消息给服务端，服务端接收到之后需要群发给所有人

提示：

​	此时不能用广播地址，因为广播是UDP独有的

​	服务端可以将所有用户的Socket对象存储到一个集合中

​	当需要群发消息时，可以遍历集合发给所有的用户

​	此时的服务端，相当于做了一个消息的转发

转发核心思想如下图所示：

![1](.\img\1.png)

## 其他要求：

用户名和密码要求：

要求1：用户名要唯一，长度：6~18位，纯字母，不能有数字或其他符号。

要求2：密码长度3~8位。第一位必须是小写或者大小的字母，后面必须是纯数字。



客户端：

拥有登录、注册、聊天功能。

① 当客户端启动之后，要求让用户选择是登录操作还是注册操作，需要循环。

* 如果是登录操作，就输入用户名和密码，以下面的格式发送给服务端

		username=zhangsan&password=123

* 如果是注册操作，就输入用户名和密码，以下面的格式发送给服务端

		username=zhangsan&password=123

② 登录成功之后，直接开始聊天。

​	





服务端：

① 先读取本地文件中所有的正确用户信息。

② 当有客户端来链接的时候，就开启一条线程。

③ 在线程里面判断当前用户是登录操作还是注册操作。

④ 登录，校验用户名和密码是否正确

⑤ 注册，校验用户名是否唯一，校验用户名和密码的格式是否正确

⑥ 如果登录成功，开始聊天

⑦ 如果注册成功，将用户信息写到本地，开始聊天





